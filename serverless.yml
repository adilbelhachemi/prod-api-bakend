service: myTestService
provider:
  environment:
    ALLOWED_ORIGIN: ${param:allowedOrigin}
  name: aws
  runtime: go1.x
  region: us-east-1
  iam:
    role:
      statements:
        - Effect: 'Allow'
          Action:
            - 'dynamodb:PutItem'
            - 'dynamodb:Query'
            - 'dynamodb:GetItem'
            - 'dynamodb:UpdateItem'
          Resource:
            Fn::Join:
              - ':'
              - - 'arn:aws:dynamodb'
                - Ref: 'AWS::Region'
                - Ref: 'AWS::AccountId'
                - table/ecommerce-${param:stage}
functions:
  hello:
    handler: bin/hello
  api:
    handler: bin/api
    events:
      - http:
          path: /products
          method: get
      - http:
          path: /categories
          method: get
      - http:
          path: /admin/products
          method: post
      - http:
          path: /admin/categories
          method: post
      - http:
          path: /admin/inventory
          method: put
      - http:
          path: /admin/product/{productId}
          method: put
      - http:
          path: /me/cart
          method: get
      - http:
          path: /me/cart
          method: put
package:
  patterns:
    # we exclude everything
    - '!*/**'
    # except: everything that is inside bin directory
    - 'bin/*'
